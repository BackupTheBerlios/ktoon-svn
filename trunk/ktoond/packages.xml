<!--
Notas generales:
- Todos los paquetes tienen una version, por si en un futuro cambia un poco su sintaxis se tenga conocimiento de como manejarlos
- Los archivos binarios seràn codificados usando Base64 y estaran en un seccion CDATA dentro del tag <data>
- Los passwords estaran codificados con md5
- Los mensajes de chat y noticias solo estaran disponibles para los miembros del proyecto
- Los booleanos seran representados por 0 (falso) y 1 (verdadero)

Para solicitar el listado de X se envia un tag asi:
<listXs/>

y la raiz de la respuesta sera:
<Xlist>
	cuerpo
</Xlist>

Las respuesta a una peticion queryX sera Xquery

-->


<!-- ************************** PETICIONES ************************** -->

<!-- Peticion de conexion al servidor -->
<!-- 0: Cliente -->
<!-- 1: Admin -->
<connect version="0" >
	<client type="[0|1]" />
	<login>the_login</login>
	<password>the_hashed_password_md5</password>
</connect>

<newproject>
	<author>dfsda</author>
	<name>dafds</name>
</newproject>

<!-- Lista de items, por ejemplo proyectos -->
<!-- Proyectos (tipo 0), usuarios ( tipo 1), ... -->
<list version="0" >
	<options pattern="string or regexp" type="0">
		<caseSensitive enabled="0" />
		<regexp enabled="0" />
	</options>
<list/>

<listprojects>
	<option>all</option>
<listprojects />

<!-- Abrir proyecto -->
<openproject version="0">
	<project name="proyecto 1" />
</openproject>

<!-- Importar un proyecto -->
<importproject>
	<data>
		<![CDATA[KTN encoded with Base64]]>
	</data>
</importproject>



<!-- Mensaje de chat (Solo para los miembros del proyecto perteneciente a nick) -->
<chat version="0">
	<message plain="0" text="" />
</chat>

<!-- Noticia -->
<notice version="0">
	<message text="" />
</notice>

<!-- Wall (mensaje para todos) -->
<wall version="0">
	<message text="" />
</wall>

<!-- ************************** RESPUESTAS ************************** -->


<!-- Mensaje de error -->
<error version="0" >
	<message level="0">Error message</msg>
</error>


<!-- Respuesta a una petición valida de conexion -->
<ack version="0">
	<motd>Message of the day</motd>
	<sign>la firma del paquete</sign>
	<permissions>
		<perm module="project" read="0" write="0" />
		<perm module="" read="0" write="0" />
		<perm module="" read="0" write="0" />
	</permissions>
</ack>

<!-- Respuesta a una peticion <list> -->
<items version="0">
	<item>proyecto1.ktn</item>
	<item>proyecto2.ktn</item>
	<item>proyecto3.ktn</item>
	<item>proyecto4.ktn</item>
</items>


<!-- Respuesta a una peticion open valida -->
<project version="0">
	<data>
		<![CDATA[KTN encoded with Base64]]>
	</data>
</project>


<!-- Respuesta a <listprojects /> -->
<projectlist> <!-- TODO: FALTA POR ACTUALIZAR EN EL CODIGO -->
	<project name="" author="" description="" />
	<project name="" author="" description="" />
	<project name="" author="" description="" />
</projectlist>



<!-- Mensaje de chat -->
<chat version="0">
	<message from="nick" text="" />
</chat>

<!-- Noticia -->
<notice version="0">
	<message from="nick" text="" />
</notice>

<!-- Wall (mensaje para todos) -->
<wall version="0">
	<message from="nick" text="" />
</wall>



======================== ADMIN ======================

=== REQUESTS ===

<adduser>
	<login>the login</login>
	<password>crypted passwd md5</password>
	<name>the name</name>
	<permissions>
		<perm module="[module id]" read="[0|1]" write="[0|1]" />
	</permissions>
</adduser>


<removeuser>
	<login>the login</login>
</removeuser>


<!-- Todo es opcional, excepto el login -->
<updateuser>
	<login>the login</login>
	<!-- opcional -->
	<password>crypted passwd md5</password>
	<name>the name</name>
	<permissions>
		<perm module="[module id]" read="[0|1]" write="[0|1]" />
	</permissions>
	<!-- /opcional -->
</updateuser>


<removeproject>
	<project>name</project>
</removeproject>


<!-- Cualquiera, IP o LOGIN, o AMBOS -->
<ban>
	<pattern value="[ip|login]" />
</ban>

<!-- Cualquiera IP o Login -->
<removeban>
	<pattern value="[ip|login]" />
</removeban>

<!-- List bans -->
<listbans/>

<!-- Lista clientes actualmente conectados -->
<listclients />

<!-- Lista los usuarios que tiene registrados el servidor  -->
<listusers/> <!-- TODO: Esta desactualizado en el codigo -->

<!-- Lista los backups -->
<listbackups />


<addbackup>
	<entry>project name 1</entry>
	<entry>project name 2</entry>
	<entry>project name 3</entry>
</addbackup>

<removebackup>
	<entry date="" >name</entry>
	<entry date="" >name</entry>
</removebackup>

<restorebackup>
	<entry date="" >name</entry>
	<entry date="" >name</entry>
	<entry date="" >name</entry>
</restorebackup>

=== RESPONSES ===


<adduser>
	<login>the login</login>
	<password>crypted passwd md5</password>
	<name>the name</name>
	<permissions>
		<perm module="[module id]" read="[0|1]" write="[0|1]" />
	</permissions>
</adduser>


<removeuser>
	<login>the login</login>
</removeuser>


<!-- Todo es opcional, excepto el login -->
<updateuser>
	<login>the login</login>
	<!-- opcional -->
	<password>crypted passwd md5</password>
	<name>the name</name>
	<permissions>
		<perm module="[module id]" read="[0|1]" write="[0|1]" />
	</permissions>
	<!-- /opcional -->
</updateuser>

<addproject>
	<info name="name" author="author" description="">
	<users>
		<user login="login">
		<!-- Se repite -->
	</users>
</addproject>

<removeproject>
	<project>name</project>
</removeproject>


<!-- Respuesta a bans -->
<banlist>
	<entry value="ip1" />
	<entry value="ip2" />
	<entry value="ip3" />
</banlist>


<!-- Respuesta a clients -->
<clientlist>
	<client>
		<user>
			<login>the login</login>
			<name>the name</name>
		</user>
		<ip>la ip</ip>
	</client>
	<!-- Se repite -->
</clientlist>

<!--  lista de usuarios -->
<userlist>
	<user login="myLogin" name="myName"/>
	<!-- Se repite -->
</userlist>

<!--usuario -->

<userquery> <!-- TODO: ESTA DESACTULIZADO EN EL CODIGO -->
	<login>myLogin</login>
	<name>myName</name>
	<permissions>
		<perm module="[module id]" read="[0|1]" write="[0|1]" />
	</permissions>
</userquery>


<!-- Respuesta a listbackups -->

<backuplist>
	<entry name="">
		<backup date="" />
		<backup date="" />
		<backup date="" />
		...
	</entry>
	<entry name="">
		<backup date="" />
		<backup date="" />
		<backup date="" />
		...
	</entry>
	....
</backuplist>

<!-- Respuesa a addbackup -->
<addbackup>
	<entry date="[date]">project name</entry>
	<entry date="[date]">project name</entry>
	<entry date="[date]">project name</entry>
</addbackup
